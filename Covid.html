<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
    <style type="text/css">
        body {
            padding: 1em 3em;
        }
        .dataTables_filter {
            float: right;
            margin-bottom: 1em;
        }
        .dt-buttons a .glyphicon {
            visibility: hidden;
        }
        .dt-buttons a:hover .glyphicon {
            visibility: visible;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs-3.3.6/jqc-1.12.3/jszip-2.5.0/pdfmake-0.1.18/dt-1.10.12/af-2.1.2/b-1.2.2/b-colvis-1.2.2/b-html5-1.2.2/b-print-1.2.2/cr-1.3.2/fc-3.2.2/fh-3.1.2/kt-2.1.3/r-2.1.0/rr-1.1.2/sc-1.4.2/se-1.2.0/datatables.min.css" />
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/v/bs-3.3.6/jqc-1.12.3/jszip-2.5.0/pdfmake-0.1.18/dt-1.10.12/af-2.1.2/b-1.2.2/b-colvis-1.2.2/b-html5-1.2.2/b-print-1.2.2/cr-1.3.2/fc-3.2.2/fh-3.1.2/kt-2.1.3/r-2.1.0/rr-1.1.2/sc-1.4.2/se-1.2.0/datatables.min.js"></script>
</head>
<body>
    <span>Develop by : jigs</span>
    <br />
    <br />
    <table id="example" class="table table-striped table-bordered dataTable" cellspacing="0" width="100%" role="grid" aria-describedby="example_info" style="width: 100%;">
        <thead>
            <tr role="row">
                <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width: 50px;">Pin code</th>
                <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width: 200px;">Center Name</th>
                <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width: 200px;">Address</th>
                <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width: 60px;">Vaccine</th>
                <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width: 60px;">Age</th>
                <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width: 50px;">Dose 1</th>
                <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width: 50px;">Dose 2</th>
                <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width: 70px;">Date</th>
                <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width: 50px;">Fee Type</th>
                <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width: 40px;">Fee(Rs)</th>
            </tr>
        </thead>
    </table>
</body>
</html>

<script>
    var d = new Date();
    var month = d.getMonth() + 1;
    var day = d.getDate() + 1;
    $(document).ready(function () {
        CovidData();
    });
    function CovidData() {
        $.ajax({
            type: "GET",
            url: "https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id=770&date=" + day + "-" + month + "-2021",
            success: function (data) {
                $('#example').dataTable({
                    paging: true,
                    fixedHeader: {
                        header: true
                    },
                    dom: 'Bfrtip',
                    data: data.sessions,
                    columns: [
                        { "data": "pincode" },
                        { "data": "name" },
                        { "data": "address" },
                        { "data": "vaccine" },
                        {
                            "render": function (data, type, full, meta) {
                                debugger;
                                if (full.min_age_limit == 18) {
                                    return 'Age between 18 - 44';
                                }
                                if (full.min_age_limit == 45) {
                                    return 'Age between 45 - 60';
                                }
                                else {
                                    return '';
                                }
                            }, "data": "min_age_limit"
                        },
                        { "data": "available_capacity_dose1" },
                        { "data": "available_capacity_dose2" },
                        { "data": "date" },
                        { "data": "fee_type" },
                        { "data": "fee" }
                    ],
                    buttons: [
                        {
                            extend: 'excel',
                            text: 'Excel <span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span>'
                        },
                        'copy',
                        'colvis'
                    ],

                });
            }
        });
    }
</script>
